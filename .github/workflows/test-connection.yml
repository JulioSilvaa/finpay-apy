name: Test VPS Connection

on:
  workflow_dispatch: # Permite executar manualmente

jobs:
  test-connection:
    runs-on: ubuntu-latest

    steps:
      - name: Test SSH Connection
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.VPS_HOST }}
          username: ${{ secrets.VPS_USERNAME }}
          key: ${{ secrets.VPS_SSH_KEY }}
          port: ${{ secrets.VPS_PORT || 22 }}
          script: |
            echo "‚úÖ Conex√£o SSH estabelecida com sucesso!"
            echo "üìç Hostname: $(hostname)"
            echo "üë§ Usu√°rio: $(whoami)"
            echo "üìÇ Diret√≥rio atual: $(pwd)"
            echo "üíª Sistema: $(uname -a)"
            echo "üê≥ Docker instalado: $(docker --version 2>/dev/null || echo 'n√£o instalado')"
            echo "üì¶ Node instalado: $(node --version 2>/dev/null || echo 'n√£o instalado')"
